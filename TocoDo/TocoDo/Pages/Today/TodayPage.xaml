<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://xamarin.com/schemas/2014/forms"
			 xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
			 xmlns:views="clr-namespace:TocoDo.Views;assembly=TocoDo"
			 xmlns:markupExtensions="clr-namespace:TocoDo.MarkupExtensions;assembly=TocoDo"
			 xmlns:services="clr-namespace:TocoDo.Services;assembly=TocoDo"
			 xmlns:system1="clr-namespace:System;assembly=netstandard"
			 xmlns:abstractions="clr-namespace:Plugin.CrossPlatformTintedImage.Abstractions;assembly=Plugin.CrossPlatformTintedImage.Abstractions"
			 xmlns:customRenderers="clr-namespace:TocoDo.CustomRenderers;assembly=TocoDo"
			 xmlns:microcharts="clr-namespace:Microcharts.Forms;assembly=Microcharts.Forms"
			 xmlns:global="clr-namespace:TocoDo.Views.Global;assembly=TocoDo"
			 xmlns:forms="clr-namespace:Xamarin.Forms;assembly=Xamarin.Forms.CarouselView"
			 xmlns:habits="clr-namespace:TocoDo.Views.Habits;assembly=TocoDo"
			 x:Class="TocoDo.Pages.Main.TodayPage"
			 x:Name="This">
	<ContentPage.Content>
		<AbsoluteLayout VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand" BindingContext="{x:Reference This}">
			<ScrollView AbsoluteLayout.LayoutBounds="0,0,1,1" AbsoluteLayout.LayoutFlags="All">
				<Grid Style="{StaticResource PageGrid}">
					<Grid.RowDefinitions>
						<RowDefinition Height="Auto"/>
						<RowDefinition Height="Auto"/>
						<RowDefinition Height="*"/>
					</Grid.RowDefinitions>

					<!--Progress-->
					<global:FrameWrapper Header="Progress" VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand" BackgroundColor="{StaticResource ColorPrimaryDark}">
						<!--<microcharts:ChartView x:Name="ChartProgress" VerticalOptions="FillAndExpand" HorizontalOptions="FillAndExpand"  Margin="-5,10"/>-->
						<Grid ColumnSpacing="0">
							<Grid.ColumnDefinitions>
								<ColumnDefinition Width="Auto"/>
								<ColumnDefinition Width="*"/>
								<ColumnDefinition Width="Auto"/>
							</Grid.ColumnDefinitions>
							<Grid.Resources>
								<ResourceDictionary>
									<Style TargetType="StackLayout">
										<Setter Property="VerticalOptions" Value="CenterAndExpand"/>
										<Setter Property="Padding" Value="10, 0, 10, 0"/>
									</Style>
									<Style TargetType="abstractions:TintedImage">
										<Setter Property="TintColor" Value="White"/>
										<Setter Property="VerticalOptions" Value="Center"/>
									</Style>
								</ResourceDictionary>
							</Grid.Resources>

							<StackLayout Padding="15, 0, 5, 0">
								<abstractions:TintedImage Source="ic_keyboard_arrow_left_white_36dp.png"/>
							</StackLayout>
							
							<views:MyCalendarView Grid.Column="1" HorizontalOptions="FillAndExpand"/>
							
							<StackLayout Grid.Column="2" Padding="5, 0, 15, 0">
								<abstractions:TintedImage  Source="ic_keyboard_arrow_right_white_36dp.png" VerticalOptions="Center"/>
							</StackLayout>
						</Grid>
					</global:FrameWrapper>

					<!--TODAY-->
					<global:FrameWrapper Grid.Row="1" Header="Tasks">
						<views:TodoSetView Padding="15, 5" TasksSource="{x:Static services:StorageService.TodayTasks}" VerticalOptions="Start"/>
					</global:FrameWrapper>

					<global:FrameWrapper Grid.Row="2" Header="Habits">
						<habits:ActualHabitCollection ItemsSource="{x:Static services:StorageService.ActiveHabits}"/>
					</global:FrameWrapper>
				</Grid>
			</ScrollView>

			<customRenderers:FloatingAddButton AbsoluteLayout.LayoutBounds="1,1,88,88" AbsoluteLayout.LayoutFlags="PositionProportional" Margin="16" Clicked="ButtonAddToday_OnClicked" />

			<views:NewTaskView x:Name="NewTaskView" AbsoluteLayout.LayoutBounds="1,1,1,50" AbsoluteLayout.LayoutFlags="PositionProportional,WidthProportional"/>
			<DatePicker x:Name="GlobalDatePicker" IsVisible="False"  DateSelected="GlobalDatePicker_DateSelected" />
			<TimePicker x:Name="GlobalTimePicker" IsVisible="False" Time="{Binding SelectedTime}" PropertyChanged="GlobalTimePicker_OnPropertyChanged"/>
		</AbsoluteLayout>
	</ContentPage.Content>
</ContentPage>